# Scripts ç›®å½•è¯´æ˜

æœ¬ç›®å½•åŒ…å«äº†YOLOv11-CFruité¡¹ç›®çš„æ‰€æœ‰è„šæœ¬æ–‡ä»¶ï¼Œç”¨äºè®­ç»ƒã€è¯„ä¼°ã€æ•°æ®å¤„ç†ç­‰ä»»åŠ¡ã€‚

## ğŸ“ è„šæœ¬åˆ†ç±»

### ğŸ¯ è®­ç»ƒè„šæœ¬

#### `train_improved.py` â­ (æ¨è)
- **åŠŸèƒ½**: æ”¹è¿›ç‰ˆè®­ç»ƒè„šæœ¬ï¼ŒåŒ…å«æ—©åœã€æ··åˆç²¾åº¦ç­‰é«˜çº§åŠŸèƒ½
- **ç‰¹ç‚¹**: 
  - è‡ªåŠ¨è®¾å¤‡æ£€æµ‹ï¼ˆCPU/GPUï¼‰
  - æ—©åœæœºåˆ¶
  - è‡ªåŠ¨æ··åˆç²¾åº¦è®­ç»ƒ
  - æ¢¯åº¦ç´¯ç§¯
  - è¯¦ç»†çš„è®­ç»ƒç›‘æ§
- **ä½¿ç”¨**: `python scripts/train_improved.py`

#### `train.py`
- **åŠŸèƒ½**: åŸºç¡€è®­ç»ƒè„šæœ¬
- **ç‰¹ç‚¹**: ç®€å•æ˜“ç”¨ï¼Œé€‚åˆå…¥é—¨
- **ä½¿ç”¨**: `python scripts/train.py`

#### `train_memory_optimized.py`
- **åŠŸèƒ½**: å†…å­˜ä¼˜åŒ–ç‰ˆè®­ç»ƒè„šæœ¬
- **ç‰¹ç‚¹**: é€‚ç”¨äºæ˜¾å­˜è¾ƒå°çš„GPU
- **ä½¿ç”¨**: `python scripts/train_memory_optimized.py`

#### `quick_train.py`
- **åŠŸèƒ½**: å¿«é€Ÿè®­ç»ƒè„šæœ¬
- **ç‰¹ç‚¹**: é¢„è®¾å‚æ•°ï¼Œä¸€é”®è®­ç»ƒ
- **ä½¿ç”¨**: `python scripts/quick_train.py`

### ğŸ“Š æ•°æ®å¤„ç†è„šæœ¬

#### `prepare_data.py`
- **åŠŸèƒ½**: æ•°æ®é¢„å¤„ç†å’Œå‡†å¤‡
- **ç‰¹ç‚¹**: 
  - è‡ªåŠ¨æ•°æ®å¢å¼º
  - æ ¼å¼è½¬æ¢
  - æ•°æ®éªŒè¯
- **ä½¿ç”¨**: `python scripts/prepare_data.py --data-path /path/to/data`

#### `check_data.py`
- **åŠŸèƒ½**: æ•°æ®è´¨é‡æ£€æŸ¥
- **ç‰¹ç‚¹**: 
  - æ£€æŸ¥å›¾åƒå’Œæ ‡ç­¾ä¸€è‡´æ€§
  - ç»Ÿè®¡æ•°æ®é›†ä¿¡æ¯
  - æ£€æµ‹å¼‚å¸¸æ•°æ®
- **ä½¿ç”¨**: `python scripts/check_data.py --data-path /path/to/data`

### ğŸ” è¯„ä¼°è„šæœ¬

#### `evaluate_model.py`
- **åŠŸèƒ½**: æ¨¡å‹è¯„ä¼°å’Œæµ‹è¯•
- **ç‰¹ç‚¹**: 
  - è®¡ç®—mAPç­‰æŒ‡æ ‡
  - ç”Ÿæˆè¯„ä¼°æŠ¥å‘Š
  - å¯è§†åŒ–æ£€æµ‹ç»“æœ
- **ä½¿ç”¨**: `python scripts/evaluate_model.py --model-path checkpoints/best.pt`

#### `quick_test.py`
- **åŠŸèƒ½**: å¿«é€Ÿæ¨¡å‹æµ‹è¯•
- **ç‰¹ç‚¹**: ç®€å•æµ‹è¯•ï¼Œå¿«é€ŸéªŒè¯
- **ä½¿ç”¨**: `python scripts/quick_test.py --model-path checkpoints/best.pt`

### ğŸ“ˆ å¯è§†åŒ–è„šæœ¬

#### `visualize_training.py`
- **åŠŸèƒ½**: è®­ç»ƒè¿‡ç¨‹å¯è§†åŒ–
- **ç‰¹ç‚¹**: 
  - æŸå¤±æ›²çº¿
  - å­¦ä¹ ç‡å˜åŒ–
  - æŒ‡æ ‡è¶‹åŠ¿
- **ä½¿ç”¨**: `python scripts/visualize_training.py --log-dir logs`

#### `quick_visualize.py`
- **åŠŸèƒ½**: å¿«é€Ÿæ•°æ®å¯è§†åŒ–
- **ç‰¹ç‚¹**: 
  - æ•°æ®é›†æ ·æœ¬å±•ç¤º
  - æ£€æµ‹ç»“æœå¯è§†åŒ–
  - æ‰¹é‡å›¾åƒå¤„ç†
- **ä½¿ç”¨**: `python scripts/quick_visualize.py --data-path /path/to/data`

#### `show_training_results.py`
- **åŠŸèƒ½**: è®­ç»ƒç»“æœå±•ç¤º
- **ç‰¹ç‚¹**: 
  - è®­ç»ƒæ—¥å¿—åˆ†æ
  - æ€§èƒ½æŒ‡æ ‡å±•ç¤º
  - ç»“æœå¯¹æ¯”
- **ä½¿ç”¨**: `python scripts/show_training_results.py --log-dir logs`

### ğŸ”„ è‡ªåŠ¨åŒ–è„šæœ¬

#### `auto_train_and_visualize.sh`
- **åŠŸèƒ½**: è‡ªåŠ¨åŒ–è®­ç»ƒå’Œå¯è§†åŒ–
- **ç‰¹ç‚¹**: 
  - ä¸€é”®å®Œæˆè®­ç»ƒ
  - è‡ªåŠ¨ç”Ÿæˆå¯è§†åŒ–æŠ¥å‘Š
  - æ‰¹é‡å¤„ç†
- **ä½¿ç”¨**: `bash scripts/auto_train_and_visualize.sh`

## ğŸš€ ä½¿ç”¨æŒ‡å—

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•
cd YOLOv11-CFruit

# æ£€æŸ¥Pythonç¯å¢ƒ
python --version

# æ£€æŸ¥PyTorch
python -c "import torch; print(torch.__version__)"
```

### 2. æ•°æ®å‡†å¤‡
```bash
# å‡†å¤‡æ•°æ®é›†
python scripts/prepare_data.py --data-path /path/to/data

# æ£€æŸ¥æ•°æ®è´¨é‡
python scripts/check_data.py --data-path /path/to/data
```

### 3. æ¨¡å‹è®­ç»ƒ
```bash
# ä½¿ç”¨æ”¹è¿›ç‰ˆè®­ç»ƒè„šæœ¬ï¼ˆæ¨èï¼‰
python scripts/train_improved.py --device auto --epochs 100

# æˆ–ä½¿ç”¨å¿«é€Ÿè®­ç»ƒ
python scripts/quick_train.py
```

### 4. æ¨¡å‹è¯„ä¼°
```bash
# è¯„ä¼°æ¨¡å‹æ€§èƒ½
python scripts/evaluate_model.py --model-path checkpoints/best.pt

# å¿«é€Ÿæµ‹è¯•
python scripts/quick_test.py --model-path checkpoints/best.pt
```

### 5. ç»“æœå¯è§†åŒ–
```bash
# å¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹
python scripts/visualize_training.py --log-dir logs

# å¯è§†åŒ–æ£€æµ‹ç»“æœ
python scripts/quick_visualize.py --data-path /path/to/test/data
```

## âš™ï¸ å‚æ•°è¯´æ˜

### é€šç”¨å‚æ•°
- `--device`: è®­ç»ƒè®¾å¤‡ (auto/cpu/cuda)
- `--batch-size`: æ‰¹æ¬¡å¤§å°
- `--epochs`: è®­ç»ƒè½®æ•°
- `--save-dir`: æ¨¡å‹ä¿å­˜ç›®å½•
- `--log-dir`: æ—¥å¿—ä¿å­˜ç›®å½•

### è®­ç»ƒå‚æ•°
- `--config`: æ¨¡å‹é…ç½®æ–‡ä»¶
- `--data`: æ•°æ®é…ç½®æ–‡ä»¶
- `--resume`: ä»æ£€æŸ¥ç‚¹æ¢å¤è®­ç»ƒ
- `--num-workers`: æ•°æ®åŠ è½½å·¥ä½œè¿›ç¨‹æ•°

### è¯„ä¼°å‚æ•°
- `--model-path`: æ¨¡å‹æ–‡ä»¶è·¯å¾„
- `--test-data`: æµ‹è¯•æ•°æ®è·¯å¾„
- `--conf-threshold`: ç½®ä¿¡åº¦é˜ˆå€¼
- `--iou-threshold`: IoUé˜ˆå€¼

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **GPUå†…å­˜**: æ ¹æ®GPUæ˜¾å­˜è°ƒæ•´æ‰¹æ¬¡å¤§å°
2. **æ•°æ®è·¯å¾„**: ç¡®ä¿æ•°æ®è·¯å¾„æ­£ç¡®ä¸”å¯è®¿é—®
3. **é…ç½®æ–‡ä»¶**: æ£€æŸ¥é…ç½®æ–‡ä»¶æ ¼å¼å’Œå‚æ•°
4. **æ—¥å¿—ç›‘æ§**: å®šæœŸæŸ¥çœ‹è®­ç»ƒæ—¥å¿—å’Œå¯è§†åŒ–ç»“æœ
5. **æ¨¡å‹ä¿å­˜**: å®šæœŸä¿å­˜æ£€æŸ¥ç‚¹ï¼Œé¿å…è®­ç»ƒä¸­æ–­

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **CUDAå†…å­˜ä¸è¶³**: å‡å°æ‰¹æ¬¡å¤§å°æˆ–ä½¿ç”¨å†…å­˜ä¼˜åŒ–è„šæœ¬
2. **æ•°æ®åŠ è½½é”™è¯¯**: æ£€æŸ¥æ•°æ®è·¯å¾„å’Œæ ¼å¼
3. **è®­ç»ƒä¸æ”¶æ•›**: è°ƒæ•´å­¦ä¹ ç‡å’Œæ•°æ®å¢å¼ºå‚æ•°
4. **æ¨¡å‹ä¿å­˜å¤±è´¥**: æ£€æŸ¥ç£ç›˜ç©ºé—´å’Œæƒé™

### è°ƒè¯•æŠ€å·§
1. ä½¿ç”¨ `--device cpu` æµ‹è¯•è„šæœ¬åŠŸèƒ½
2. æ£€æŸ¥æ—¥å¿—æ–‡ä»¶è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯
3. ä½¿ç”¨å°æ•°æ®é›†è¿›è¡Œå¿«é€Ÿæµ‹è¯•
4. é€æ­¥å¢åŠ è®­ç»ƒå‚æ•°å¤æ‚åº¦

---

**æœ€åæ›´æ–°**: 2024å¹´12æœˆ
**ç‰ˆæœ¬**: v1.0 